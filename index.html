<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ŸÑÿπÿ®ÿ© ÿßŸÑÿÆŸÑŸäÿ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html, body {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: #e5e7eb;
            min-height: 100vh;
            padding: 8px;
        }

        h1 {
            text-align: center;
            color: #1e293b;
            font-size: 1.4rem;
            margin-bottom: 5px;
        }

        #scoreboard {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .score {
            padding: 4px 10px;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 900;
            border: 2px solid;
        }

        .score.green {
            background: #dcfce7;
            border-color: #22c55e;
            color: #22c55e;
        }

        .score.orange {
            background: #ffedd5;
            border-color: #f97316;
            color: #f97316;
        }

        #board {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 3px;
            padding: 8px;
            background: white;
            border-radius: 10px;
            max-width: 340px;
            margin: 0 auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .hex {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 900;
            border-radius: 6px;
            transition: all 0.15s;
        }

        .hex.green-side {
            background: #22c55e;
            color: white;
            border: 2px solid #16a34a;
        }

        .hex.orange-side {
            background: #f97316;
            color: white;
            border: 2px solid #ea580c;
        }

        .hex.captured {
            border: 3px solid #1e293b !important;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
        }

        /* Modal */
        #qmodal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            justify-content: center;
            align-items: center;
            z-index: 100;
            padding: 8px;
        }

        #qmodal.show { display: flex; }

        #qbox {
            background: white;
            padding: 15px;
            border-radius: 12px;
            max-width: 320px;
            width: 100%;
            text-align: center;
        }

        #qletter {
            font-size: 3rem;
            font-weight: 900;
            color: #22c55e;
        }

        #qcat {
            background: #f1f5f9;
            padding: 2px 8px;
            border-radius: 6px;
            color: #64748b;
            font-size: 0.7rem;
        }

        #timer {
            height: 3px;
            background: #e2e8f0;
            border-radius: 2px;
            margin: 8px 0;
            overflow: hidden;
        }

        #timerfill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e, #fbbf24, #ef4444);
            width: 100%;
        }

        #qtext {
            font-size: 0.95rem;
            color: #1e293b;
            margin: 8px 0;
            font-weight: 700;
        }

        #qopts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px;
            margin-top: 8px;
        }

        #qopts button {
            padding: 8px 4px;
            font-size: 0.75rem;
            font-weight: 700;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            font-family: Cairo;
        }

        #qopts button.correct { background: #22c55e; color: white; border-color: #22c55e; }
        #qopts button.wrong { background: #ef4444; color: white; border-color: #ef4444; }

        #result {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 900;
            z-index: 200;
            animation: pop 0.25s ease;
        }

        @keyframes pop {
            from { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        #result.show { display: block; }
        #result.green { background: #22c55e; color: white; }
        #result.orange { background: #f97316; color: white; }

        #info {
            text-align: center;
            color: #64748b;
            font-size: 0.75rem;
            margin-top: 5px;
        }

        /* iPad */
        @media (min-width: 768px) {
            #board { max-width: 450px; gap: 5px; }
            .hex { font-size: 1.4rem; }
            #qletter { font-size: 4rem; }
            #qtext { font-size: 1.1rem; }
            #qopts button { padding: 12px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <h1>üêù ŸÑÿπÿ®ÿ© ÿßŸÑÿÆŸÑŸäÿ©</h1>
    
    <div id="scoreboard">
        <div class="score green">üü¢ <span id="gs">0</span></div>
        <div class="score orange">üü† <span id="os">0</span></div>
    </div>

    <div id="board"></div>

    <div id="qmodal">
        <div id="qbox">
            <div id="qletter">ÿ£</div>
            <div id="qcat">ÿ∑ÿ®</div>
            <div id="timer"><div id="timerfill"></div></div>
            <div id="qtext">ÿßŸÑÿ≥ÿ§ÿßŸÑ...</div>
            <div id="qopts"></div>
        </div>
    </div>

    <div id="result"></div>

    <div id="info">‚¨ÜÔ∏è 3 ÿµŸÅŸàŸÅ ŸÅŸàŸÇ ÿ£ÿÆÿ∂ÿ± | ‚¨áÔ∏è 3 ÿµŸÅŸàŸÅ ÿ™ÿ≠ÿ™ ÿ®ÿ±ÿ™ŸÇÿßŸÑŸä</div>

    <script>
    const letters = 'ÿ£ÿ®ÿ™ÿ´ÿ¨ÿ≠ÿÆÿØÿ∞ÿ±ÿ≤ÿ≥ÿ¥ÿµÿ∂ÿ∑ÿ∏ÿπÿ∫ŸÅŸÇŸÉŸÑŸÖŸÜŸáŸàŸä'.split('');
    
    const qz = {
        'ÿ£':[{c:'ÿ∑ÿ®',q:'ÿ£ŸÉÿ®ÿ± ÿπÿ∂Ÿàÿü',o:['ÿßŸÑÿ¨ŸÑÿØ','ÿßŸÑŸÉÿ®ÿØ','ÿßŸÑÿ±ÿ¶ÿ©','ÿßŸÑŸÇŸÑÿ®'],a:0},{c:'ÿπÿßŸÖ',q:'ÿπÿßÿµŸÖÿ© ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©ÿü',o:['ÿßŸÑÿ±Ÿäÿßÿ∂','ÿ¨ÿØÿ©','ŸÖŸÉÿ©','ÿßŸÑÿØŸÖÿßŸÖ'],a:0}],
        'ÿ®':[{c:'ÿ∑ÿ®',q:'ÿßŸÑÿ≥ŸÉÿ±Ÿä ŸäÿµŸäÿ®ÿü',o:['ÿßŸÑÿ®ŸÜŸÉÿ±Ÿäÿßÿ≥','ÿßŸÑŸÇŸÑÿ®','ÿßŸÑŸÉŸÑŸâ','ÿßŸÑŸÉÿ®ÿØ'],a:0},{c:'ÿπŸÑŸÖ',q:'ÿ£ÿÆŸÅ ÿπŸÜÿµÿ±ÿü',o:['ŸáŸäÿØÿ±Ÿàÿ¨ŸäŸÜ','ŸáŸäŸÑŸäŸàŸÖ','ŸÑŸäÿ´ŸäŸàŸÖ'],a:0}],
        'ÿ™':[{c:'ÿ∑ÿ®',q:'ŸÇŸäÿßÿ≥ ÿßŸÑÿ∂ÿ∫ÿ∑ÿü',o:['ŸÖŸÇŸäÿßÿ≥ ÿßŸÑÿ∂ÿ∫ÿ∑','ŸÖŸäÿ≤ÿßŸÜ','ÿ≥ŸÖÿßÿπÿ©'],a:0},{c:'ÿØŸäŸÜ',q:'ÿßŸÑÿµŸÑŸàÿßÿ™ÿü',o:['5','3','4'],a:0}],
        'ÿ´':[{c:'ÿ∑ÿ®',q:'ÿ´ÿßŸÑÿ´ ÿ£ŸÉÿ®ÿ± ÿπÿ∂Ÿàÿü',o:['ÿßŸÑŸÉÿ®ÿØ','ÿßŸÑŸÇŸÑÿ®','ÿßŸÑŸÖÿÆ','ÿßŸÑÿ±ÿ¶ÿ©'],a:0}],
        'ÿ¨':[{c:'ÿ∑ÿ®',q:'ÿ£ŸÉÿ®ÿ± ŸÖŸÅÿµŸÑÿü',o:['ÿßŸÑÿ±ŸÉÿ®ÿ©','ÿßŸÑŸÉÿ™ŸÅ','ÿßŸÑŸàÿ±ŸÉ'],a:0}],
        'ÿ≠':[{c:'ÿ∑ÿ®',q:'ÿ£ŸÉÿ´ÿ± ÿ≥ÿ±ÿ∑ÿßŸÜ ŸÜÿ≥ÿßÿ°ÿü',o:['ÿßŸÑÿ´ÿØŸä','ÿßŸÑÿ±ÿ¶ÿ©','ÿßŸÑŸÇŸàŸÑŸàŸÜ'],a:0}],
        'ÿÆ':[{c:'ÿ∑ÿ®',q:'ÿÆŸÑÿßŸäÿß ÿßŸÑÿØŸÖ ÿßŸÑÿ®Ÿäÿ∂ÿßÿ°ÿü',o:['ÿßŸÑÿπÿØŸàŸâ','ÿßŸÑÿ¨ŸÑÿ∑ÿßÿ™'],a:0}],
        'ÿØ':[{c:'ÿ∑ÿ®',q:'ÿØŸàÿßÿ° ŸÑŸÑŸÇŸÑŸÇÿü',o:['ÿ≥Ÿäÿ±ÿ®ÿ±ÿßŸÑŸÉÿ≥','ÿ®ÿßÿ±ÿßÿ≥Ÿäÿ™ÿßŸÖŸàŸÑ','ÿ£ÿ≥ÿ®ÿ±ŸäŸÜ'],a:0}],
        'ÿ∞':[{c:'ÿ∑ÿ®',q:'ÿßŸÑÿ∞ÿßŸÉÿ±ÿ©ÿü',o:['ÿßŸÑŸÖÿÆ','ÿßŸÑŸÇŸÑÿ®','ÿßŸÑŸÉÿ®ÿØ'],a:0}],
        'ÿ±':[{c:'ÿ∑ÿ®',q:'ÿßŸÑÿ±ÿ¶ÿ© ŸÅÿµÿü',o:['5','3','4'],a:0}],
        'ÿ≤':[{c:'ÿπŸÑŸÖ',q:'ÿÆŸàÿßÿ™ŸÖ ÿ≤ÿ≠ŸÑÿü',o:['ÿ¨ŸÑŸäÿØ','ÿµÿÆŸàÿ±','ÿ∫ÿßÿ≤'],a:0}],
        'ÿ≥':[{c:'ÿ∑ÿ®',q:'ÿ£ÿ≥ŸÜÿßŸÜ ÿßŸÑÿ®ÿßŸÑÿ∫ÿü',o:['32','30','28'],a:0}],
        'ÿ¥':[{c:'ÿ∑ÿ®',q:'ÿ¥ÿ±ÿßŸäŸäŸÜ ÿßŸÑŸÇŸÑÿ®ÿü',o:['ÿ™ÿßÿ¨Ÿäÿ©','ÿ≥ÿ®ÿßÿ™Ÿäÿ©','ŸÉŸÑŸàŸäÿ©'],a:0}],
        'ÿµ':[{c:'ÿ∑ÿ®',q:'ÿµŸÖÿßŸÖÿßÿ™ ÿßŸÑŸÇŸÑÿ®ÿü',o:['4','3','2'],a:0}],
        'ÿ∂':[{c:'ÿ∑ÿ®',q:'ÿ∂ÿ∫ÿ∑ ÿ∑ÿ®ŸäÿπŸäÿü',o:['120/80','140/90','100/70'],a:0}],
        'ÿ∑':[{c:'ÿπŸÑŸÖ',q:'ÿ£ŸÑŸàÿßŸÜ ÿßŸÑÿ∑ŸäŸÅÿü',o:['7','6','8'],a:0}],
        'ÿπ':[{c:'ÿ∑ÿ®',q:'ÿ£ÿ∑ŸàŸÑ ÿπÿ∏ŸÖÿü',o:['ÿßŸÑŸÅÿÆÿ∞','ÿßŸÑÿ∏ŸÜÿ®Ÿàÿ®','ÿßŸÑÿπÿ∂ÿØ'],a:0}],
        'ÿ∫':[{c:'ÿ∑ÿ®',q:'ÿßŸÑÿ∫ÿØÿ© ÿßŸÑÿØÿ±ŸÇŸäÿ©ÿü',o:['ÿßŸÑÿ±ŸÇÿ®ÿ©','ÿßŸÑÿ®ÿ∑ŸÜ','ÿßŸÑÿ±ÿ£ÿ≥'],a:0}],
        'ŸÅ':[{c:'ÿ∑ÿ®',q:'ŸÖÿ™ÿ®ÿ±ÿπ ÿπÿßŸÖÿü',o:['O','A','B'],a:0}],
        'ŸÇ':[{c:'ÿ∑ÿ®',q:'ŸÇŸàŸÇÿπÿ© ÿßŸÑÿ£ÿ∞ŸÜÿü',o:['ÿßŸÑÿ£ÿ∞ŸÜ','ÿßŸÑÿπŸäŸÜ','ÿßŸÑÿ£ŸÜŸÅ'],a:0}],
        'ŸÉ':[{c:'ÿ∑ÿ®',q:'ÿßŸÑŸÉÿ™ŸÅÿü',o:['3 ÿπÿ∏ÿßŸÖ','ÿπÿ∏ŸÖŸäŸÜ'],a:0}],
        'ŸÑ':[{c:'ÿ∑ÿ®',q:'ÿØŸÖŸàŸäÿü',o:['ÿØÿßŸÉŸÜ','ŸÅÿßÿ™ÿ≠'],a:0}],
        'ŸÖ':[{c:'ÿ∑ÿ®',q:'ŸÖÿπÿØÿ© ÿ≠ÿßŸÖÿ∂ÿü',o:['HCl','HCO3'],a:0}],
        'ŸÜ':[{c:'ÿ∑ÿ®',q:'ŸÜÿÆÿßÿπ ÿßŸÑÿπÿ∏ŸÖÿü',o:['ŸÉÿ±Ÿäÿßÿ™ ÿßŸÑÿØŸÖ','ÿßŸÑÿπÿ∏ÿßŸÖ'],a:0}],
        'Ÿá':[{c:'ÿ∑ÿ®',q:'ÿßŸÑŸáŸàÿßÿ° ŸäÿØÿÆŸÑÿü',o:['ÿßŸÑÿ®ŸÑÿπŸàŸÖ','ÿßŸÑÿ±ÿ∫ÿßŸÖŸâ','ÿßŸÑÿ≠ŸÜÿ¨ÿ±ÿ©'],a:0}],
        'Ÿà':[{c:'ÿ∑ÿ®',q:'Ÿàÿ≤ŸÜ ÿßŸÑÿØŸÖÿßÿ∫ÿü',o:['1.4 ŸÉÿ¨ŸÖ','2 ŸÉÿ¨ŸÖ'],a:0}],
        'Ÿä':[{c:'ÿ∑ÿ®',q:'ÿßŸÑŸáÿ∂ŸÖ Ÿäÿ®ÿØÿ£ÿü',o:['ÿßŸÑŸÅŸÖ','ÿßŸÑŸÖÿπÿØÿ©','ÿßŸÑÿ£ŸÖÿπÿßÿ°'],a:0}]
    };

    let gs = 0, os = 0, curQ = null, curCell = null, tm = null, tl = 15;
    let turn = 'green';

    function init() {
        const b = document.getElementById('board');
        b.innerHTML = '';
        const gameLetters = letters.slice(0, 18);
        
        gameLetters.forEach((l, i) => {
            const hex = document.createElement('div');
            hex.className = 'hex';
            hex.innerText = l;
            hex.dataset.l = l;
            hex.dataset.t = 'empty';
            
            const row = Math.floor(i / 6);
            
            if (row < 3) {
                hex.classList.add('green-side');
                hex.dataset.side = 'green';
            } else {
                hex.classList.add('orange-side');
                hex.dataset.side = 'orange';
            }
            
            hex.onclick = () => showQ(hex);
            b.appendChild(hex);
        });
        
        turn = 'green';
    }

    function showQ(c) {
        if (c.dataset.side === turn) return;
        if (c.dataset.captured === 'true') return;
        
        curCell = c;
        const cur = c.dataset.l;
        const arr = qz[cur] || [];
        if (!arr.length) { alert('ŸÖÿß ŸÅŸäŸá ÿ£ÿ≥ÿ¶ŸÑÿ©!'); return; }
        
        curQ = arr[Math.floor(Math.random() * arr.length)];
        
        document.getElementById('qletter').innerText = cur;
        document.getElementById('qcat').innerText = curQ.c;
        document.getElementById('qtext').innerText = curQ.q;
        
        const opts = document.getElementById('qopts');
        opts.innerHTML = '';
        
        const optLabels = [...curQ.o];
        optLabels.sort(() => Math.random() - 0.5);
        
        optLabels.forEach(label => {
            const btn = document.createElement('button');
            btn.innerText = label;
            const origIdx = curQ.o.indexOf(label);
            btn.onclick = () => checkAnswer(origIdx);
            opts.appendChild(btn);
        });
        
        document.getElementById('qmodal').classList.add('show');
        
        tl = 15;
        document.getElementById('timerfill').style.width = '100%';
        clearInterval(tm);
        tm = setInterval(() => {
            tl--;
            document.getElementById('timerfill').style.width = (tl/15*100) + '%';
            if (tl <= 0) { clearInterval(tm); timeout(); }
        }, 1000);
    }

    function checkAnswer(idx) {
        clearInterval(tm);
        
        const btns = document.querySelectorAll('#qopts button');
        let correctLabel = curQ.o[curQ.a];
        btns.forEach(btn => {
            if (btn.innerText === correctLabel) btn.classList.add('correct');
        });
        
        if (idx === curQ.a) {
            setTimeout(() => {
                document.getElementById('qmodal').classList.remove('show');
                capture(curCell, turn);
                showRes(turn, true);
                turn = turn === 'green' ? 'orange' : 'green';
            }, 600);
        } else {
            btns.forEach((btn, i) => {
                if (curQ.o[i] === curQ.o[idx]) btn.classList.add('wrong');
            });
            const other = turn === 'green' ? 'orange' : 'green';
            setTimeout(() => {
                document.getElementById('qmodal').classList.remove('show');
                capture(curCell, other);
                showRes(other, false);
                turn = other;
            }, 600);
        }
    }

    function timeout() {
        const other = turn === 'green' ? 'orange' : 'green';
        document.getElementById('qmodal').classList.remove('show');
        capture(curCell, other);
        showRes(other, false);
        turn = other;
    }

    function showRes(t, correct) {
        const r = document.getElementById('result');
        r.className = 'show ' + t;
        r.innerText = correct ? (t === 'green' ? 'üü¢' : 'üü†') : '‚è∞';
        setTimeout(() => r.classList.remove('show'), 1000);
    }

    function capture(c, team) {
        c.dataset.captured = 'true';
        c.classList.add('captured');
        if (team === 'green') { gs++; document.getElementById('gs').innerText = gs; }
        else { os++; document.getElementById('os').innerText = os; }
    }

    init();
    </script>
</body>
</html>
